<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="css/style.css">

    <script>
        window.onerror = function(message, source, lineno, colno, error) {
            alert("üî• –û–®–ò–ë–ö–ê:\n" + message + "\n\n–§–∞–π–ª: " + source + "\n–°—Ç—Ä–æ–∫–∞: " + lineno);
        };
        window.addEventListener('unhandledrejection', function(event) {
            alert("üî• ASYNC –û–®–ò–ë–ö–ê:\n" + event.reason);
        });

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ Supabase —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(() => {
            if (!window.supabase) alert("‚ö†Ô∏è –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ Supabase –ù–ï –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å (window.supabase is undefined). –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∏–ª–∏ CDN.");
        }, 2000);

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(() => {
            const status = document.getElementById('studio-name').innerText;
            if (status === '–ó–∞–≥—Ä—É–∑–∫–∞...') {
                alert("‚ö†Ô∏è –°–∫—Ä–∏–ø—Ç js/pages/client.js –Ω–µ —Å—Ç–∞—Ä—Ç–æ–≤–∞–ª.\n–í–æ–∑–º–æ–∂–Ω–æ, —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω (404) –∏–ª–∏ –ø–∞–ø–∫–∞ js/pages –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.");
            }
        }, 3000);
    </script>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="card" id="master-card">
        <div class="master-profile">
            <img id="m-avatar" src="" style="display:none;" class="mp-avatar">
            <div id="m-placeholder" class="mp-avatar" style="display:flex; align-items:center; justify-content:center; font-size:24px;">üè†</div>
            <div class="mp-info">
                <h2 id="studio-name">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                <div id="m-address" class="mp-address" style="display:none;">üìç <span></span></div>
            </div>
        </div>
        <div id="m-about" class="mp-about" style="display:none;"></div>
    </div>

    <div class="section-label">1. –ü–∏—Ç–æ–º–µ—Ü</div>
    <div class="grid-3">
        <div class="select-card" id="pet-dog" onclick="setPetType('–°–æ–±–∞–∫–∞','pet-dog')">üê∂<br>–°–æ–±–∞–∫–∞</div>
        <div class="select-card" id="pet-cat" onclick="setPetType('–ö–æ—à–∫–∞','pet-cat')">üê±<br>–ö–æ—à–∫–∞</div>
        <div class="select-card" id="pet-other" onclick="setPetType('–î—Ä—É–≥–æ–π','pet-other')">üê∞<br>–î—Ä—É–≥–æ–π</div>
    </div>

    <input type="text" id="p-breed" placeholder="–ü–æ—Ä–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –®–ø–∏—Ü) *" style="margin-top:10px;">
    <input type="text" id="p-name" placeholder="–ö–ª–∏—á–∫–∞ –ø–∏—Ç–æ–º—Ü–∞ *">

    <div class="section-label">2. –í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É</div>
    <div class="cat-scroll" id="category-filter"></div>
    <div id="services-container" style="min-height: 50px;">–ó–∞–≥—Ä—É–∑–∫–∞...</div>

    <div class="section-label">3. –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</div>
    <div class="card">
        <div class="cal-header">
            <button onclick="changeMonth(-1)" style="font-size:18px;border:none;background:none;color:var(--accent)">‚ùÆ</button>
            <b id="month-label">...</b>
            <button onclick="changeMonth(1)" style="font-size:18px;border:none;background:none;color:var(--accent)">‚ùØ</button>
        </div>
        <div class="cal-grid" id="calendar"></div>
        <div id="loader-time" style="display:none; text-align:center; margin-top:10px; color:#999; font-size:12px;">–ü—Ä–æ–≤–µ—Ä–∫–∞...</div>
        <div class="time-grid" id="time-slots"></div>
    </div>

    <div class="section-label">4. –í–∞—à–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã</div>
    <input type="tel" id="p-phone" placeholder="+7 (___) ___-__-__ *">

    <button class="btn" onclick="sendBooking()" style="margin-top: 20px;">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button>

    <script type="module" src="js/pages/client.js"></script>
</body>
</html>